/*!
 * classie v1.0.1
 * class helper functions
 * from bonzo https://github.com/ded/bonzo
 * MIT license
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */

/*jshint browser: true, strict: true, undef: true, unused: true */
/*global define: false, module: false */



(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)")}var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c)};addClass=function(elem,c){elem.classList.add(c)};removeClass=function(elem,c){elem.classList.remove(c)}}else{hasClass=function(elem,c){return classReg(c).test(elem.className)};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ')}}function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c)}var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie)}else if(typeof exports==='object'){module.exports=classie}else{window.classie=classie}})(window);(function(window){'use strict';var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false)}}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)};obj.attachEvent("on"+type,obj[type+fn])}}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false)}}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=undefined}}}var eventie={bind:bind,unbind:unbind};if(typeof define==='function'&&define.amd){define(eventie)}else if(typeof exports==='object'){module.exports=eventie}else{window.eventie=eventie}})(this);(function(window){'use strict';var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=='function'){return}if(docReady.isReady){fn()}else{queue.push(fn)}}docReady.isReady=false;function init(event){var isIE8NotReady=event.type==='readystatechange'&&document.readyState!=='complete';if(docReady.isReady||isIE8NotReady){return}docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){eventie.bind(document,'DOMContentLoaded',init);eventie.bind(document,'readystatechange',init);eventie.bind(window,'load',init);return docReady}if(typeof define==='function'&&define.amd){docReady.isReady=typeof requirejs==='function';define(['eventie/eventie'],defineDocReady)}else if(typeof exports==='object'){module.exports=defineDocReady(require('eventie'))}else{window.docReady=defineDocReady(window.eventie)}})(window);(function(window){'use strict';var prefixes='Webkit Moz ms Ms O'.split(' ');var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return}if(typeof docElemStyle[propName]==='string'){return propName}propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==='string'){return prefixed}}}if(typeof define==='function'&&define.amd){define(function(){return getStyleProperty})}else if(typeof exports==='object'){module.exports=getStyleProperty}else{window.getStyleProperty=getStyleProperty}})(window);(function(window,undefined){'use strict';var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')===-1&&!isNaN(num);return isValid&&num}var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0}return size}function defineGetSize(getStyleProperty){var boxSizingProp=getStyleProperty('boxSizing');var isBoxSizeOuter;(function(){if(!boxSizingProp){return}var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style[boxSizingProp]='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div)})();function getSize(elem){if(typeof elem==='string'){elem=document.querySelector(elem)}if(!elem||typeof elem!=='object'||!elem.nodeType){return}var style=getStyle(elem);if(style.display==='none'){return getZeroSize()}var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==='border-box');for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0}var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth)}var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)}size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size}function mungeNonPixel(elem,value){if(getComputedStyle||value.indexOf('%')===-1){return value}var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left}style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft}return value}return getSize}if(typeof define==='function'&&define.amd){define(['get-style-property/get-style-property'],defineGetSize)}else if(typeof exports==='object'){module.exports=defineGetSize(require('get-style-property'))}else{window.getSize=defineGetSize(window.getStyleProperty)}})(window);(function(){'use strict';function EventEmitter(){}var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i}}return-1}function alias(name){return function aliasClosure(){return this[name].apply(this,arguments)}}proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key]}}}else{response=events[evt]||(events[evt]=[])}return response};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener)}return flatListeners};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners}return response||listeners};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false})}}return this};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true})};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i])}return this};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1)}}}return this};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners)};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners)};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value)}else{multiple.call(this,i,value)}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i])}}return this};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt]}else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key]}}}else{delete this._events}return this};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener)}response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener)}}}}return this};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue}else{return true}};proto._getEvents=function _getEvents(){return this._events||(this._events={})};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter};if(typeof define==='function'&&define.amd){define(function(){return EventEmitter})}else if(typeof module==='object'&&module.exports){module.exports=EventEmitter}else{this.EventEmitter=EventEmitter}}.call(this));(function(window,factory){'use strict';if(typeof define==='function'&&define.amd){define(['eventEmitter/EventEmitter','eventie/eventie'],function(EventEmitter,eventie){return factory(window,EventEmitter,eventie)})}else if(typeof exports==='object'){module.exports=factory(window,require('wolfy87-eventemitter'),require('eventie'))}else{window.imagesLoaded=factory(window,window.EventEmitter,window.eventie)}})(window,function factory(window,EventEmitter,eventie){'use strict';var $=window.jQuery;var console=window.console;var hasConsole=typeof console!=='undefined';function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]'}function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}return ary}function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options)}if(typeof elem==='string'){elem=document.querySelectorAll(elem)}this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options==='function'){onAlways=options}else{extend(this.options,options)}if(onAlways){this.on('always',onAlways)}this.getImages();if($){this.jqDeferred=new $.Deferred()}var _this=this;setTimeout(function(){_this.check()})}ImagesLoaded.prototype=new EventEmitter();ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;i<len;i++){var elem=this.elements[i];if(elem.nodeName==='IMG'){this.addImage(elem)}var nodeType=elem.nodeType;if(!nodeType||!(nodeType===1||nodeType===9||nodeType===11)){continue}var childElems=elem.querySelectorAll('img');for(var j=0,jLen=childElems.length;j<jLen;j++){var img=childElems[j];this.addImage(img)}}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)};ImagesLoaded.prototype.check=function(){var _this=this;var checkedCount=0;var length=this.images.length;this.hasAnyBroken=false;if(!length){this.complete();return}function onConfirm(image,message){if(_this.options.debug&&hasConsole){console.log('confirm',image,message)}_this.progress(image);checkedCount++;if(checkedCount===length){_this.complete()}return true}for(var i=0;i<length;i++){var loadingImage=this.images[i];loadingImage.on('confirm',onConfirm);loadingImage.check()}};ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit('progress',_this,image);if(_this.jqDeferred&&_this.jqDeferred.notify){_this.jqDeferred.notify(_this,image)}})};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;var _this=this;setTimeout(function(){_this.emit(eventName,_this);_this.emit('always',_this);if(_this.jqDeferred){var jqMethod=_this.hasAnyBroken?'reject':'resolve';_this.jqDeferred[jqMethod](_this)}})};if($){$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this))}}function LoadingImage(img){this.img=img}LoadingImage.prototype=new EventEmitter();LoadingImage.prototype.check=function(){var resource=cache[this.img.src]||new Resource(this.img.src);if(resource.isConfirmed){this.confirm(resource.isLoaded,'cached was confirmed');return}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return}var _this=this;resource.on('confirm',function(resrc,message){_this.confirm(resrc.isLoaded,message);return true});resource.check()};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emit('confirm',this,message)};var cache={};function Resource(src){this.src=src;cache[src]=this}Resource.prototype=new EventEmitter();Resource.prototype.check=function(){if(this.isChecked){return}var proxyImage=new Image();eventie.bind(proxyImage,'load',this);eventie.bind(proxyImage,'error',this);proxyImage.src=this.src;this.isChecked=true};Resource.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};Resource.prototype.onload=function(event){this.confirm(true,'onload');this.unbindProxyEvents(event)};Resource.prototype.onerror=function(event){this.confirm(false,'onerror');this.unbindProxyEvents(event)};Resource.prototype.confirm=function(isLoaded,message){this.isConfirmed=true;this.isLoaded=isLoaded;this.emit('confirm',this,message)};Resource.prototype.unbindProxyEvents=function(event){eventie.unbind(event.target,'load',this);eventie.unbind(event.target,'error',this)};return ImagesLoaded});(function(window){'use strict';var slice=Array.prototype.slice;function noop(){}function defineBridget($){if(!$){return}function addOptionMethod(PluginClass){if(PluginClass.prototype.option){return}PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return}this.options=$.extend(true,this.options,opts)}}var logError=typeof console==='undefined'?noop:function(message){console.error(message)};function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if(typeof options==='string'){var args=slice.call(arguments,1);for(var i=0,len=this.length;i<len;i++){var elem=this[i];var instance=$.data(elem,namespace);if(!instance){logError("cannot call methods on "+namespace+" prior to initialization; "+"attempted to call '"+options+"'");continue}if(!$.isFunction(instance[options])||options.charAt(0)==='_'){logError("no such method '"+options+"' for "+namespace+" instance");continue}var returnValue=instance[options].apply(instance,args);if(returnValue!==undefined){return returnValue}}return this}else{return this.each(function(){var instance=$.data(this,namespace);if(instance){instance.option(options);instance._init()}else{instance=new PluginClass(this,options);$.data(this,namespace,instance)}})}}}$.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass);bridge(namespace,PluginClass)};return $.bridget}if(typeof define==='function'&&define.amd){define(['jquery'],defineBridget)}else{defineBridget(window.jQuery)}})(window);(function(ElemProto){'use strict';var matchesMethod=(function(){if(ElemProto.matchesSelector){return'matchesSelector'}var prefixes=['webkit','moz','ms','o'];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method}}})();function match(elem,selector){return elem[matchesMethod](selector)}function checkParent(elem){if(elem.parentNode){return}var fragment=document.createDocumentFragment();fragment.appendChild(elem)}function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return true}}return false}function matchChild(elem,selector){checkParent(elem);return match(elem,selector)}var matchesSelector;if(matchesMethod){var div=document.createElement('div');var supportsOrphans=match(div,'div');matchesSelector=supportsOrphans?match:matchChild}else{matchesSelector=query}if(typeof define==='function'&&define.amd){define(function(){return matchesSelector})}else if(typeof exports==='object'){module.exports=matchesSelector}else{window.matchesSelector=matchesSelector}})(Element.prototype);(function(window){'use strict';var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}function isEmptyObj(obj){for(var prop in obj){return false}prop=null;return true}function toDash(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase()})}function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){var transitionProperty=getStyleProperty('transition');var transformProperty=getStyleProperty('transform');var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty('perspective');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProperty];var prefixableProperties=['transform','transition','transitionDuration','transitionProperty'];var vendorProperties=(function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp}}return cache})();function Item(element,layout){if(!element){return}this.element=element;this.layout=layout;this.position={x:0,y:0};this._create()}extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'})};Item.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};Item.prototype.getSize=function(){this.size=getSize(this.element)};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var x=parseInt(style[isOriginLeft?'left':'right'],10);var y=parseInt(style[isOriginTop?'top':'bottom'],10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};if(layoutOptions.isOriginLeft){style.left=(this.position.x+layoutSize.paddingLeft)+'px';style.right=''}else{style.right=(this.position.x+layoutSize.paddingRight)+'px';style.left=''}if(layoutOptions.isOriginTop){style.top=(this.position.y+layoutSize.paddingTop)+'px';style.bottom=''}else{style.bottom=(this.position.y+layoutSize.paddingBottom)+'px';style.top=''}this.css(style);this.emitEvent('layout',[this])};var translate=is3d?function(x,y){return'translate3d('+x+'px, '+y+'px, 0)'}:function(x,y){return'translate('+x+'px, '+y+'px)'};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return}var transX=x-curX;var transY=y-curY;var transitionStyle={};var layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX;transY=layoutOptions.isOriginTop?transY:-transY;transitionStyle.transform=translate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition()};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10)};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to)}for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this)}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return}var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop]}for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true}}if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true};var itemTransitionProperties=transformProperty&&(toDash(transformProperty)+',opacity');Item.prototype.enableTransition=function(){if(this.isTransitioning){return}this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false)};Item.prototype.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)};Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={'-webkit-transform':'transform','-moz-transform':'transform','-o-transform':'transform'};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return}var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition()}if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName]}if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName]}this.emitEvent('transitionEnd',[this])};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]=''}this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent('remove',[this])};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var _this=this;this.on('transitionEnd',function(){_this.removeElem();return true});this.hide()};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true})};Item.prototype.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:'none'})}}}})};Item.prototype.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''})};return Item}if(typeof define==='function'&&define.amd){define(['eventEmitter/EventEmitter','get-size/get-size','get-style-property/get-style-property'],outlayerItemDefinition)}else{window.Outlayer={};window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty)}})(window);(function(window){'use strict';var document=window.document;var console=window.console;var jQuery=window.jQuery;var noop=function(){};function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]'}function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(obj&&typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}return ary}var isElement=(typeof HTMLElement==='object')?function isElementDOM2(obj){return obj instanceof HTMLElement}:function isElementQuirky(obj){return obj&&typeof obj==='object'&&obj.nodeType===1&&typeof obj.nodeName==='string'};var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i}}return-1};function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1)}}function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2}).toLowerCase()}function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){var GUID=0;var instances={};function Outlayer(element,options){if(typeof element==='string'){element=document.querySelector(element)}if(!element||!isElement(element)){if(console){console.error('Bad '+this.constructor.namespace+' element: '+element)}return}this.element=element;this.options=extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout()}}Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){extend(this.options,opts)};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item)}return items};Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);var itemSelector=this.options.itemSelector;var itemElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!isElement(elem)){continue}if(itemSelector){if(matchesSelector(elem,itemSelector)){itemElems.push(elem)}var childElems=elem.querySelectorAll(itemSelector);for(var j=0,jLen=childElems.length;j<jLen;j++){itemElems.push(childElems[j])}}else{itemElems.push(elem)}}return itemElems};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element)}return elems};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize()};Outlayer.prototype.getSize=function(){this.size=getSize(this.element)};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0}else{if(typeof option==='string'){elem=this.element.querySelector(option)}else if(isElement(option)){elem=option}this[measurement]=elem?getSize(elem)[size]:option}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout()};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item)}}return layoutItems};Outlayer.prototype._layoutItems=function(items,isInstant){var _this=this;function onItemsLayout(){_this.emitEvent('layoutComplete',[_this,items])}if(!items||!items.length){onItemsLayout();return}this._itemsOn(items,'layout',onItemsLayout);var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position)}this._processLayoutQueue(queue)};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y)}else{item.moveTo(x,y)}};Outlayer.prototype._postLayout=function(){this.resizeContainer()};Outlayer.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return}var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false)}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return}var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth}measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px'};Outlayer.prototype._itemsOn=function(items,eventName,callback){var doneCount=0;var count=items.length;var _this=this;function tick(){doneCount++;if(doneCount===count){callback.call(_this)}return true}for(var i=0,len=items.length;i<len;i++){var item=items[i];item.on(eventName,tick)}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return}this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem)}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return}for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];removeFrom(elem,this.stamps);this.unignore(elem)}};Outlayer.prototype._find=function(elems){if(!elems){return}if(typeof elems==='string'){elems=this.element.querySelectorAll(elems)}elems=makeArray(elems);return elems};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset};Outlayer.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return}eventie.bind(window,'resize',this);this.isResizeBound=true};Outlayer.prototype.unbindResize=function(){if(this.isResizeBound){eventie.unbind(window,'resize',this)}this.isResizeBound=false};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout}this.resizeTimeout=setTimeout(delayed,100)};Outlayer.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()};Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items)}return items};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return}this.layoutItems(items,true);this.reveal(items)};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return}var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems)};Outlayer.prototype.reveal=function(items){var len=items&&items.length;if(!len){return}for(var i=0;i<len;i++){var item=items[i];item.reveal()}};Outlayer.prototype.hide=function(items){var len=items&&items.length;if(!len){return}for(var i=0;i<len;i++){var item=items[i];item.hide()}};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item}}};Outlayer.prototype.getItems=function(elems){if(!elems||!elems.length){return}var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item)}}return items};Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(!removeItems||!removeItems.length){return}this._itemsOn(removeItems,'remove',function(){this.emitEvent('removeComplete',[this,removeItems])});for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();removeFrom(item,this.items)}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy()}this.unbindResize();delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace)}};Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id]};Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}if(Object.create){Layout.prototype=Object.create(Outlayer.prototype)}else{extend(Layout.prototype,Outlayer.prototype)}Layout.prototype.constructor=Layout;Layout.defaults=extend({},Outlayer.defaults);extend(Layout.defaults,options);Layout.prototype.settings={};Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments)};Layout.Item.prototype=new Item();docReady(function(){var dashedNamespace=toDashed(namespace);var elems=document.querySelectorAll('.js-'+dashedNamespace);var dataAttr='data-'+dashedNamespace+'-options';for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr)}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.nodeName.toLowerCase()+(elem.id?'#'+elem.id:'')+': '+error)}continue}var instance=new Layout(elem,options);if(jQuery){jQuery.data(elem,namespace,instance)}}});if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout)}return Layout};Outlayer.Item=Item;return Outlayer}if(typeof define==='function'&&define.amd){define(['eventie/eventie','doc-ready/doc-ready','eventEmitter/EventEmitter','get-size/get-size','matches-selector/matches-selector','./item'],outlayerDefinition)}else{window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item)}})(window);(function(window){'use strict';var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item===value){return i}}return-1};function masonryDefinition(Outlayer,getSize){var Masonry=Outlayer.create('masonry');Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0)}this.maxY=0};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=indexOf(colGroup,minimumY);var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight}return position};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs}var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var firstX=this.options.isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i])}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this.options.isFitWidth){size.width=this._getContainerFitWidth()}return size};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break}unusedCols++}return(this.cols-unusedCols)*this.columnWidth-this.gutter};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!==this.containerWidth};return Masonry}if(typeof define==='function'&&define.amd){define(['outlayer/outlayer','get-size/get-size'],masonryDefinition)}else{window.Masonry=masonryDefinition(window.Outlayer,window.getSize)}})(window);(function(window){'use strict';function itemDefinition(Outlayer){function Item(){Outlayer.Item.apply(this,arguments)}Item.prototype=new Outlayer.Item();Item.prototype._create=function(){this.id=this.layout.itemGUID++;Outlayer.Item.prototype._create.call(this);this.sortData={}};Item.prototype.updateSortData=function(){if(this.isIgnored){return}this.sortData.id=this.id;this.sortData['original-order']=this.id;this.sortData.random=Math.random();var getSortData=this.layout.options.getSortData;var sorters=this.layout._sorters;for(var key in getSortData){var sorter=sorters[key];this.sortData[key]=sorter(this.element,this)}};var _destroy=Item.prototype.destroy;Item.prototype.destroy=function(){_destroy.apply(this,arguments);this.css({display:''})};return Item}if(typeof define==='function'&&define.amd){define(['outlayer/outlayer'],itemDefinition)}else{window.Isotope=window.Isotope||{};window.Isotope.Item=itemDefinition(window.Outlayer)}})(window);(function(window){'use strict';function layoutModeDefinition(getSize,Outlayer){function LayoutMode(isotope){this.isotope=isotope;if(isotope){this.options=isotope.options[this.namespace];this.element=isotope.element;this.items=isotope.filteredItems;this.size=isotope.size}}(function(){var facadeMethods=['_resetLayout','_getItemLayoutPosition','_manageStamp','_getContainerSize','_getElementOffset','needsResizeLayout'];for(var i=0,len=facadeMethods.length;i<len;i++){var methodName=facadeMethods[i];LayoutMode.prototype[methodName]=getOutlayerMethod(methodName)}function getOutlayerMethod(methodName){return function(){return Outlayer.prototype[methodName].apply(this.isotope,arguments)}}})();LayoutMode.prototype.needsVerticalResizeLayout=function(){var size=getSize(this.isotope.element);var hasSizes=this.isotope.size&&size;return hasSizes&&size.innerHeight!==this.isotope.size.innerHeight};LayoutMode.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)};LayoutMode.prototype.getColumnWidth=function(){this.getSegmentSize('column','Width')};LayoutMode.prototype.getRowHeight=function(){this.getSegmentSize('row','Height')};LayoutMode.prototype.getSegmentSize=function(segment,size){var segmentName=segment+size;var outerSize='outer'+size;this._getMeasurement(segmentName,outerSize);if(this[segmentName]){return}var firstItemSize=this.getFirstItemSize();this[segmentName]=firstItemSize&&firstItemSize[outerSize]||this.isotope.size['inner'+size]};LayoutMode.prototype.getFirstItemSize=function(){var firstItem=this.isotope.filteredItems[0];return firstItem&&firstItem.element&&getSize(firstItem.element)};LayoutMode.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)};LayoutMode.prototype.getSize=function(){this.isotope.getSize();this.size=this.isotope.size};LayoutMode.modes={};LayoutMode.create=function(namespace,options){function Mode(){LayoutMode.apply(this,arguments)}Mode.prototype=new LayoutMode();if(options){Mode.options=options}Mode.prototype.namespace=namespace;LayoutMode.modes[namespace]=Mode;return Mode};return LayoutMode}if(typeof define==='function'&&define.amd){define(['get-size/get-size','outlayer/outlayer'],layoutModeDefinition)}else{window.Isotope=window.Isotope||{};window.Isotope.LayoutMode=layoutModeDefinition(window.getSize,window.Outlayer)}})(window);(function(window){'use strict';var jQuery=window.jQuery;function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}var trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/g,'')};var docElem=document.documentElement;var getText=docElem.textContent?function(elem){return elem.textContent}:function(elem){return elem.innerText};var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]'}var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i}}return-1};function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(obj&&typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}return ary}function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1)}}function isotopeDefinition(Outlayer,getSize,matchesSelector,Item,LayoutMode){var Isotope=Outlayer.create('isotope',{layoutMode:"masonry",isJQueryFiltering:true,sortAscending:true});Isotope.Item=Item;Isotope.LayoutMode=LayoutMode;Isotope.prototype._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();Outlayer.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=['original-order'];for(var name in LayoutMode.modes){this._initLayoutMode(name)}};Isotope.prototype.reloadItems=function(){this.itemGUID=0;Outlayer.prototype.reloadItems.call(this)};Isotope.prototype._itemize=function(){var items=Outlayer.prototype._itemize.apply(this,arguments);for(var i=0,len=items.length;i<len;i++){var item=items[i];item.id=this.itemGUID++}this._updateItemsSortData(items);return items};Isotope.prototype._initLayoutMode=function(name){var Mode=LayoutMode.modes[name];var initialOpts=this.options[name]||{};this.options[name]=Mode.options?extend(Mode.options,initialOpts):initialOpts;this.modes[name]=new Mode(this)};Isotope.prototype.layout=function(){if(!this._isLayoutInited&&this.options.isInitLayout){this.arrange();return}this._layout()};Isotope.prototype._layout=function(){var isInstant=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,isInstant);this._isLayoutInited=true};Isotope.prototype.arrange=function(opts){this.option(opts);this._getIsInstant();this.filteredItems=this._filter(this.items);this._sort();this._layout()};Isotope.prototype._init=Isotope.prototype.arrange;Isotope.prototype._getIsInstant=function(){var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this._isInstant=isInstant;return isInstant};Isotope.prototype._filter=function(items){var filter=this.options.filter;filter=filter||'*';var matches=[];var hiddenMatched=[];var visibleUnmatched=[];var test=this._getFilterTest(filter);for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item.isIgnored){continue}var isMatched=test(item);if(isMatched){matches.push(item)}if(isMatched&&item.isHidden){hiddenMatched.push(item)}else if(!isMatched&&!item.isHidden){visibleUnmatched.push(item)}}var _this=this;function hideReveal(){_this.reveal(hiddenMatched);_this.hide(visibleUnmatched)}if(this._isInstant){this._noTransition(hideReveal)}else{hideReveal()}return matches};Isotope.prototype._getFilterTest=function(filter){if(jQuery&&this.options.isJQueryFiltering){return function(item){return jQuery(item.element).is(filter)}}if(typeof filter==='function'){return function(item){return filter(item.element)}}return function(item){return matchesSelector(item.element,filter)}};Isotope.prototype.updateSortData=function(elems){this._getSorters();elems=makeArray(elems);var items=this.getItems(elems);items=items.length?items:this.items;this._updateItemsSortData(items)};Isotope.prototype._getSorters=function(){var getSortData=this.options.getSortData;for(var key in getSortData){var sorter=getSortData[key];this._sorters[key]=mungeSorter(sorter)}};Isotope.prototype._updateItemsSortData=function(items){for(var i=0,len=items.length;i<len;i++){var item=items[i];item.updateSortData()}};var mungeSorter=(function(){function mungeSorter(sorter){if(typeof sorter!=='string'){return sorter}var args=trim(sorter).split(' ');var query=args[0];var attrMatch=query.match(/^\[(.+)\]$/);var attr=attrMatch&&attrMatch[1];var getValue=getValueGetter(attr,query);var parser=Isotope.sortDataParsers[args[1]];sorter=parser?function(elem){return elem&&parser(getValue(elem))}:function(elem){return elem&&getValue(elem)};return sorter}function getValueGetter(attr,query){var getValue;if(attr){getValue=function(elem){return elem.getAttribute(attr)}}else{getValue=function(elem){var child=elem.querySelector(query);return child&&getText(child)}}return getValue}return mungeSorter})();Isotope.sortDataParsers={'parseInt':function(val){return parseInt(val,10)},'parseFloat':function(val){return parseFloat(val)}};Isotope.prototype._sort=function(){var sortByOpt=this.options.sortBy;if(!sortByOpt){return}var sortBys=[].concat.apply(sortByOpt,this.sortHistory);var itemSorter=getItemSorter(sortBys,this.options.sortAscending);this.filteredItems.sort(itemSorter);if(sortByOpt!==this.sortHistory[0]){this.sortHistory.unshift(sortByOpt)}};function getItemSorter(sortBys,sortAsc){return function sorter(itemA,itemB){for(var i=0,len=sortBys.length;i<len;i++){var sortBy=sortBys[i];var a=itemA.sortData[sortBy];var b=itemB.sortData[sortBy];if(a>b||a<b){var isAscending=sortAsc[sortBy]!==undefined?sortAsc[sortBy]:sortAsc;var direction=isAscending?1:-1;return(a>b?1:-1)*direction}}return 0}}Isotope.prototype._mode=function(){var layoutMode=this.options.layoutMode;var mode=this.modes[layoutMode];if(!mode){throw new Error('No layout mode: '+layoutMode);}mode.options=this.options[layoutMode];return mode};Isotope.prototype._resetLayout=function(){Outlayer.prototype._resetLayout.call(this);this._mode()._resetLayout()};Isotope.prototype._getItemLayoutPosition=function(item){return this._mode()._getItemLayoutPosition(item)};Isotope.prototype._manageStamp=function(stamp){this._mode()._manageStamp(stamp)};Isotope.prototype._getContainerSize=function(){return this._mode()._getContainerSize()};Isotope.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()};Isotope.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return}var filteredItems=this._filterRevealAdded(items);this.filteredItems=this.filteredItems.concat(filteredItems)};Isotope.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return}var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();var filteredItems=this._filterRevealAdded(items);this.layoutItems(previousItems);this.filteredItems=filteredItems.concat(this.filteredItems)};Isotope.prototype._filterRevealAdded=function(items){var filteredItems=this._noTransition(function(){return this._filter(items)});this.layoutItems(filteredItems,true);this.reveal(filteredItems);return items};Isotope.prototype.insert=function(elems){var items=this.addItems(elems);if(!items.length){return}var i,item;var len=items.length;for(i=0;i<len;i++){item=items[i];this.element.appendChild(item.element)}var filteredInsertItems=this._filter(items);this._noTransition(function(){this.hide(filteredInsertItems)});for(i=0;i<len;i++){items[i].isLayoutInstant=true}this.arrange();for(i=0;i<len;i++){delete items[i].isLayoutInstant}this.reveal(filteredInsertItems)};var _remove=Isotope.prototype.remove;Isotope.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);_remove.call(this,elems);if(!removeItems||!removeItems.length){return}for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];removeFrom(item,this.filteredItems)}};Isotope.prototype.shuffle=function(){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.sortData.random=Math.random()}this.options.sortBy='random';this._sort();this._layout()};Isotope.prototype._noTransition=function(fn){var transitionDuration=this.options.transitionDuration;this.options.transitionDuration=0;var returnValue=fn.call(this);this.options.transitionDuration=transitionDuration;return returnValue};Isotope.prototype.getFilteredItemElements=function(){var elems=[];for(var i=0,len=this.filteredItems.length;i<len;i++){elems.push(this.filteredItems[i].element)}return elems};return Isotope}if(typeof define==='function'&&define.amd){define(['outlayer/outlayer','get-size/get-size','matches-selector/matches-selector','./item','./layout-mode','./layout-modes/masonry','./layout-modes/fit-rows','./layout-modes/vertical'],isotopeDefinition)}else{window.Isotope=isotopeDefinition(window.Outlayer,window.getSize,window.matchesSelector,window.Isotope.Item,window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function verticalDefinition(LayoutMode){var Vertical=LayoutMode.create('vertical',{horizontalAlignment:0});Vertical.prototype._resetLayout=function(){this.y=0};Vertical.prototype._getItemLayoutPosition=function(item){item.getSize();var x=(this.isotope.size.innerWidth-item.size.outerWidth)*this.options.horizontalAlignment;var y=this.y;this.y+=item.size.outerHeight;return{x:x,y:y}};Vertical.prototype._getContainerSize=function(){return{height:this.y}};return Vertical}if(typeof define==='function'&&define.amd){define(['../layout-mode'],verticalDefinition)}else{verticalDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function fitRowsDefinition(LayoutMode){var FitRows=LayoutMode.create('fitRows');FitRows.prototype._resetLayout=function(){this.x=0;this.y=0;this.maxY=0};FitRows.prototype._getItemLayoutPosition=function(item){item.getSize();if(this.x!==0&&item.size.outerWidth+this.x>this.isotope.size.innerWidth){this.x=0;this.y=this.maxY}var position={x:this.x,y:this.y};this.maxY=Math.max(this.maxY,this.y+item.size.outerHeight);this.x+=item.size.outerWidth;return position};FitRows.prototype._getContainerSize=function(){return{height:this.maxY}};return FitRows}if(typeof define==='function'&&define.amd){define(['../layout-mode'],fitRowsDefinition)}else{fitRowsDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}function masonryDefinition(LayoutMode,Masonry){var MasonryMode=LayoutMode.create('masonry');var _getElementOffset=MasonryMode.prototype._getElementOffset;var layout=MasonryMode.prototype.layout;var _getMeasurement=MasonryMode.prototype._getMeasurement;extend(MasonryMode.prototype,Masonry.prototype);MasonryMode.prototype._getElementOffset=_getElementOffset;MasonryMode.prototype.layout=layout;MasonryMode.prototype._getMeasurement=_getMeasurement;var measureColumns=MasonryMode.prototype.measureColumns;MasonryMode.prototype.measureColumns=function(){this.items=this.isotope.filteredItems;measureColumns.call(this)};var _manageStamp=MasonryMode.prototype._manageStamp;MasonryMode.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft;this.options.isOriginTop=this.isotope.options.isOriginTop;_manageStamp.apply(this,arguments)};return MasonryMode}if(typeof define==='function'&&define.amd){define(['../layout-mode','masonry/masonry'],masonryDefinition)}else{masonryDefinition(window.Isotope.LayoutMode,window.Masonry)}})(window);(function(window){'use strict';function cellsByColumnDefinition(LayoutMode){var CellsByColumn=LayoutMode.create('cellsByColumn');CellsByColumn.prototype._resetLayout=function(){this.itemIndex=0;this.getColumnWidth();this.getRowHeight();this.rows=Math.floor(this.isotope.size.innerHeight/this.rowHeight);this.rows=Math.max(this.rows,1)};CellsByColumn.prototype._getItemLayoutPosition=function(item){item.getSize();var col=Math.floor(this.itemIndex/this.rows);var row=this.itemIndex%this.rows;var x=(col+0.5)*this.columnWidth-item.size.outerWidth/2;var y=(row+0.5)*this.rowHeight-item.size.outerHeight/2;this.itemIndex++;return{x:x,y:y}};CellsByColumn.prototype._getContainerSize=function(){return{width:Math.ceil(this.itemIndex/this.rows)*this.columnWidth}};CellsByColumn.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()};return CellsByColumn}if(typeof define==='function'&&define.amd){define(['isotope/js/layout-mode'],cellsByColumnDefinition)}else{cellsByColumnDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function cellsByRowDefinition(LayoutMode){var CellsByRow=LayoutMode.create('cellsByRow');CellsByRow.prototype._resetLayout=function(){this.itemIndex=0;this.getColumnWidth();this.getRowHeight();this.cols=Math.floor(this.isotope.size.innerWidth/this.columnWidth);this.cols=Math.max(this.cols,1)};CellsByRow.prototype._getItemLayoutPosition=function(item){item.getSize();var col=this.itemIndex%this.cols;var row=Math.floor(this.itemIndex/this.cols);var x=(col+0.5)*this.columnWidth-item.size.outerWidth/2;var y=(row+0.5)*this.rowHeight-item.size.outerHeight/2;this.itemIndex++;return{x:x,y:y}};CellsByRow.prototype._getContainerSize=function(){return{height:Math.ceil(this.itemIndex/this.cols)*this.rowHeight}};return CellsByRow}if(typeof define==='function'&&define.amd){define(['isotope/js/layout-mode'],cellsByRowDefinition)}else{cellsByRowDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function fitColumnsDefinition(LayoutMode){var FitColumns=LayoutMode.create('fitColumns');FitColumns.prototype._resetLayout=function(){this.x=0;this.y=0;this.maxX=0};FitColumns.prototype._getItemLayoutPosition=function(item){item.getSize();if(this.y!==0&&item.size.outerHeight+this.y>this.isotope.size.innerHeight){this.y=0;this.x=this.maxX}var position={x:this.x,y:this.y};this.maxX=Math.max(this.maxX,this.x+item.size.outerWidth);this.y+=item.size.outerHeight;return position};FitColumns.prototype._getContainerSize=function(){return{width:this.maxX}};FitColumns.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()};return FitColumns}if(typeof define==='function'&&define.amd){define(['isotope/js/layout-mode'],fitColumnsDefinition)}else{fitColumnsDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';function horizontalDefinition(LayoutMode){var Horizontal=LayoutMode.create('horizontal',{verticalAlignment:0});Horizontal.prototype._resetLayout=function(){this.x=0};Horizontal.prototype._getItemLayoutPosition=function(item){item.getSize();var y=(this.isotope.size.innerHeight-item.size.outerHeight)*this.options.verticalAlignment;var x=this.x;this.x+=item.size.outerWidth;return{x:x,y:y}};Horizontal.prototype._getContainerSize=function(){return{width:this.x}};Horizontal.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()};return Horizontal}if(typeof define==='function'&&define.amd){define(['isotope/js/layout-mode'],horizontalDefinition)}else{horizontalDefinition(window.Isotope.LayoutMode)}})(window);(function(window){'use strict';var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item===value){return i}}return-1};function masonryHorizontalDefinition(getSize,LayoutMode){var MasonryHorizontal=LayoutMode.create('masonryHorizontal');MasonryHorizontal.prototype._resetLayout=function(){this.getRowHeight();this._getMeasurement('gutter','outerHeight');this.rowHeight+=this.gutter;this.rows=Math.floor((this.isotope.size.innerHeight+this.gutter)/this.rowHeight);this.rows=Math.max(this.rows,1);var i=this.rows;this.rowXs=[];while(i--){this.rowXs.push(0)}this.maxX=0};MasonryHorizontal.prototype._getItemLayoutPosition=function(item){item.getSize();var rowSpan=Math.ceil(item.size.outerHeight/this.rowHeight);rowSpan=Math.min(rowSpan,this.rows);var rowGroup=this._getRowGroup(rowSpan);var minimumX=Math.min.apply(Math,rowGroup);var shortRowIndex=indexOf(rowGroup,minimumX);var position={x:minimumX,y:this.rowHeight*shortRowIndex};var setWidth=minimumX+item.size.outerWidth;var setSpan=this.rows+1-rowGroup.length;for(var i=0;i<setSpan;i++){this.rowXs[shortRowIndex+i]=setWidth}return position};MasonryHorizontal.prototype._getRowGroup=function(rowSpan){if(rowSpan<2){return this.rowXs}var rowGroup=[];var groupCount=this.rows+1-rowSpan;for(var i=0;i<groupCount;i++){var groupRowXs=this.rowXs.slice(i,i+rowSpan);rowGroup[i]=Math.max.apply(Math,groupRowXs)}return rowGroup};MasonryHorizontal.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this.isotope._getElementOffset(stamp);var firstY=this.isotope.options.isOriginTop?offset.top:offset.bottom;var lastY=firstY+stampSize.outerHeight;var firstRow=Math.floor(firstY/this.rowHeight);firstRow=Math.max(0,firstRow);var lastRow=Math.floor(lastY/this.rowHeight);lastRow=Math.min(this.rows-1,lastRow);var stampMaxX=(this.isotope.options.isOriginLeft?offset.left:offset.right)+stampSize.outerWidth;for(var i=firstRow;i<=lastRow;i++){this.rowXs[i]=Math.max(stampMaxX,this.rowXs[i])}};MasonryHorizontal.prototype._getContainerSize=function(){this.maxX=Math.max.apply(Math,this.rowXs);return{width:this.maxX}};MasonryHorizontal.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()};return MasonryHorizontal}if(typeof define==='function'&&define.amd){define(['get-size/get-size','isotope/js/layout-mode'],masonryHorizontalDefinition)}else{masonryHorizontalDefinition(window.getSize,window.Isotope.LayoutMode)}})(window);(function(window){"use strict";var Packery=window.Packery=function(){};function rectDefinition(){function Rect(props){for(var prop in Rect.defaults){this[prop]=Rect.defaults[prop]}for(prop in props){this[prop]=props[prop]}}Packery.Rect=Rect;Rect.defaults={x:0,y:0,width:0,height:0};Rect.prototype.contains=function(rect){var otherWidth=rect.width||0;var otherHeight=rect.height||0;return this.x<=rect.x&&this.y<=rect.y&&this.x+this.width>=rect.x+otherWidth&&this.y+this.height>=rect.y+otherHeight};Rect.prototype.overlaps=function(rect){var thisRight=this.x+this.width;var thisBottom=this.y+this.height;var rectRight=rect.x+rect.width;var rectBottom=rect.y+rect.height;return this.x<rectRight&&thisRight>rect.x&&this.y<rectBottom&&thisBottom>rect.y};Rect.prototype.getMaximalFreeRects=function(rect){if(!this.overlaps(rect)){return false}var freeRects=[];var freeRect;var thisRight=this.x+this.width;var thisBottom=this.y+this.height;var rectRight=rect.x+rect.width;var rectBottom=rect.y+rect.height;if(this.y<rect.y){freeRect=new Rect({x:this.x,y:this.y,width:this.width,height:rect.y-this.y});freeRects.push(freeRect)}if(thisRight>rectRight){freeRect=new Rect({x:rectRight,y:this.y,width:thisRight-rectRight,height:this.height});freeRects.push(freeRect)}if(thisBottom>rectBottom){freeRect=new Rect({x:this.x,y:rectBottom,width:this.width,height:thisBottom-rectBottom});freeRects.push(freeRect)}if(this.x<rect.x){freeRect=new Rect({x:this.x,y:this.y,width:rect.x-this.x,height:this.height});freeRects.push(freeRect)}return freeRects};Rect.prototype.canFit=function(rect){return this.width>=rect.width&&this.height>=rect.height};return Rect}if(typeof define==='function'&&define.amd){define(rectDefinition)}else{window.Packery=window.Packery||{};window.Packery.Rect=rectDefinition()}})(window);(function(window){'use strict';function packerDefinition(Rect){function Packer(width,height,sortDirection){this.width=width||0;this.height=height||0;this.sortDirection=sortDirection||'downwardLeftToRight';this.reset()}Packer.prototype.reset=function(){this.spaces=[];this.newSpaces=[];var initialSpace=new Rect({x:0,y:0,width:this.width,height:this.height});this.spaces.push(initialSpace);this.sorter=sorters[this.sortDirection]||sorters.downwardLeftToRight};Packer.prototype.pack=function(rect){for(var i=0,len=this.spaces.length;i<len;i++){var space=this.spaces[i];if(space.canFit(rect)){this.placeInSpace(rect,space);break}}};Packer.prototype.placeInSpace=function(rect,space){rect.x=space.x;rect.y=space.y;this.placed(rect)};Packer.prototype.placed=function(rect){var revisedSpaces=[];for(var i=0,len=this.spaces.length;i<len;i++){var space=this.spaces[i];var newSpaces=space.getMaximalFreeRects(rect);if(newSpaces){revisedSpaces.push.apply(revisedSpaces,newSpaces)}else{revisedSpaces.push(space)}}this.spaces=revisedSpaces;Packer.mergeRects(this.spaces);this.spaces.sort(this.sorter)};Packer.mergeRects=function(rects){for(var i=0,len=rects.length;i<len;i++){var rect=rects[i];if(!rect){continue}var compareRects=rects.slice(0);compareRects.splice(i,1);var removedCount=0;for(var j=0,jLen=compareRects.length;j<jLen;j++){var compareRect=compareRects[j];var indexAdjust=i>j?0:1;if(rect.contains(compareRect)){rects.splice(j+indexAdjust-removedCount,1);removedCount++}}}return rects};var sorters={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return Packer}if(typeof define==='function'&&define.amd){define(['./rect'],packerDefinition)}else{var Packery=window.Packery=window.Packery||{};Packery.Packer=packerDefinition(Packery.Rect)}})(window);(function(window){'use strict';function itemDefinition(getStyleProperty,Outlayer,Rect){var transformProperty=getStyleProperty('transform');var Item=function PackeryItem(){Outlayer.Item.apply(this,arguments)};Item.prototype=new Outlayer.Item();var protoCreate=Item.prototype._create;Item.prototype._create=function(){protoCreate.call(this);this.rect=new Rect();this.placeRect=new Rect()};Item.prototype.dragStart=function(){this.getPosition();this.removeTransitionStyles();if(this.isTransitioning&&transformProperty){this.element.style[transformProperty]='none'}this.getSize();this.isPlacing=true;this.needsPositioning=false;this.positionPlaceRect(this.position.x,this.position.y);this.isTransitioning=false;this.didDrag=false};Item.prototype.dragMove=function(x,y){this.didDrag=true;var packerySize=this.layout.size;x-=packerySize.paddingLeft;y-=packerySize.paddingTop;this.positionPlaceRect(x,y)};Item.prototype.dragStop=function(){this.getPosition();var isDiffX=this.position.x!==this.placeRect.x;var isDiffY=this.position.y!==this.placeRect.y;this.needsPositioning=isDiffX||isDiffY;this.didDrag=false};Item.prototype.positionPlaceRect=function(x,y,isMaxYOpen){this.placeRect.x=this.getPlaceRectCoord(x,true);this.placeRect.y=this.getPlaceRectCoord(y,false,isMaxYOpen)};Item.prototype.getPlaceRectCoord=function(coord,isX,isMaxOpen){var measure=isX?'Width':'Height';var size=this.size['outer'+measure];var segment=this.layout[isX?'columnWidth':'rowHeight'];var parentSize=this.layout.size['inner'+measure];if(!isX){parentSize=Math.max(parentSize,this.layout.maxY);if(!this.layout.rowHeight){parentSize-=this.layout.gutter}}var max;if(segment){segment+=this.layout.gutter;parentSize+=isX?this.layout.gutter:0;coord=Math.round(coord/segment);var mathMethod;if(this.layout.options.isHorizontal){mathMethod=!isX?'floor':'ceil'}else{mathMethod=isX?'floor':'ceil'}var maxSegments=Math[mathMethod](parentSize/segment);maxSegments-=Math.ceil(size/segment);max=maxSegments}else{max=parentSize-size}coord=isMaxOpen?coord:Math.min(coord,max);coord*=segment||1;return Math.max(0,coord)};Item.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x;this.rect.y=this.placeRect.y};return Item}if(typeof define==='function'&&define.amd){define(['get-style-property/get-style-property','outlayer/outlayer','./rect'],itemDefinition)}else{window.Packery.Item=itemDefinition(window.getStyleProperty,window.Outlayer,window.Packery.Rect)}})(window);(function(window){'use strict';function packeryDefinition(classie,getSize,Outlayer,Rect,Packer,Item){var Packery=Outlayer.create('packery');Packery.Item=Item;Packery.prototype._create=function(){Outlayer.prototype._create.call(this);this.packer=new Packer();this.stamp(this.options.stamped);var _this=this;this.handleDraggabilly={dragStart:function(draggie){_this.itemDragStart(draggie.element)},dragMove:function(draggie){_this.itemDragMove(draggie.element,draggie.position.x,draggie.position.y)},dragEnd:function(draggie){_this.itemDragEnd(draggie.element)}};this.handleUIDraggable={start:function handleUIDraggableStart(event){_this.itemDragStart(event.currentTarget)},drag:function handleUIDraggableDrag(event,ui){_this.itemDragMove(event.currentTarget,ui.position.left,ui.position.top)},stop:function handleUIDraggableStop(event){_this.itemDragEnd(event.currentTarget)}}};Packery.prototype._resetLayout=function(){this.getSize();this._getMeasurements();var packer=this.packer;if(this.options.isHorizontal){packer.width=Number.POSITIVE_INFINITY;packer.height=this.size.innerHeight+this.gutter;packer.sortDirection='rightwardTopToBottom'}else{packer.width=this.size.innerWidth+this.gutter;packer.height=Number.POSITIVE_INFINITY;packer.sortDirection='downwardLeftToRight'}packer.reset();this.maxY=0;this.maxX=0};Packery.prototype._getMeasurements=function(){this._getMeasurement('columnWidth','width');this._getMeasurement('rowHeight','height');this._getMeasurement('gutter','width')};Packery.prototype._getItemLayoutPosition=function(item){this._packItem(item);return item.rect};Packery.prototype._packItem=function(item){this._setRectSize(item.element,item.rect);this.packer.pack(item.rect);this._setMaxXY(item.rect)};Packery.prototype._setMaxXY=function(rect){this.maxX=Math.max(rect.x+rect.width,this.maxX);this.maxY=Math.max(rect.y+rect.height,this.maxY)};Packery.prototype._setRectSize=function(elem,rect){var size=getSize(elem);var w=size.outerWidth;var h=size.outerHeight;if(w||h){var colW=this.columnWidth+this.gutter;var rowH=this.rowHeight+this.gutter;w=this.columnWidth?Math.ceil(w/colW)*colW:w+this.gutter;h=this.rowHeight?Math.ceil(h/rowH)*rowH:h+this.gutter}rect.width=Math.min(w,this.packer.width);rect.height=Math.min(h,this.packer.height)};Packery.prototype._getContainerSize=function(){if(this.options.isHorizontal){return{width:this.maxX-this.gutter}}else{return{height:this.maxY-this.gutter}}};Packery.prototype._manageStamp=function(elem){var item=this.getItem(elem);var rect;if(item&&item.isPlacing){rect=item.placeRect}else{var offset=this._getElementOffset(elem);rect=new Rect({x:this.options.isOriginLeft?offset.left:offset.right,y:this.options.isOriginTop?offset.top:offset.bottom})}this._setRectSize(elem,rect);this.packer.placed(rect);this._setMaxXY(rect)};function verticalSorter(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function horizontalSorter(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}Packery.prototype.sortItemsByPosition=function(){var sorter=this.options.isHorizontal?horizontalSorter:verticalSorter;this.items.sort(sorter)};Packery.prototype.fit=function(elem,x,y){var item=this.getItem(elem);if(!item){return}this._getMeasurements();this.stamp(item.element);item.getSize();item.isPlacing=true;x=x===undefined?item.rect.x:x;y=y===undefined?item.rect.y:y;item.positionPlaceRect(x,y,true);this._bindFitEvents(item);item.moveTo(item.placeRect.x,item.placeRect.y);this.layout();this.unstamp(item.element);this.sortItemsByPosition();item.isPlacing=false;item.copyPlaceRectPosition()};Packery.prototype._bindFitEvents=function(item){var _this=this;var ticks=0;function tick(){ticks++;if(ticks!==2){return}_this.emitEvent('fitComplete',[_this,item])}item.on('layout',function(){tick();return true});this.on('layoutComplete',function(){tick();return true})};Packery.prototype.resize=function(){var size=getSize(this.element);var hasSizes=this.size&&size;var innerSize=this.options.isHorizontal?'innerHeight':'innerWidth';if(hasSizes&&size[innerSize]===this.size[innerSize]){return}this.layout()};Packery.prototype.itemDragStart=function(elem){this.stamp(elem);var item=this.getItem(elem);if(item){item.dragStart()}};Packery.prototype.itemDragMove=function(elem,x,y){var item=this.getItem(elem);if(item){item.dragMove(x,y)}var _this=this;function delayed(){_this.layout();delete _this.dragTimeout}this.clearDragTimeout();this.dragTimeout=setTimeout(delayed,40)};Packery.prototype.clearDragTimeout=function(){if(this.dragTimeout){clearTimeout(this.dragTimeout)}};Packery.prototype.itemDragEnd=function(elem){var item=this.getItem(elem);var itemDidDrag;if(item){itemDidDrag=item.didDrag;item.dragStop()}if(!item||(!itemDidDrag&&!item.needsPositioning)){this.unstamp(elem);return}classie.add(item.element,'is-positioning-post-drag');var onLayoutComplete=this._getDragEndLayoutComplete(elem,item);if(item.needsPositioning){item.on('layout',onLayoutComplete);item.moveTo(item.placeRect.x,item.placeRect.y)}else if(item){item.copyPlaceRectPosition()}this.clearDragTimeout();this.on('layoutComplete',onLayoutComplete);this.layout()};Packery.prototype._getDragEndLayoutComplete=function(elem,item){var itemNeedsPositioning=item&&item.needsPositioning;var completeCount=0;var asyncCount=itemNeedsPositioning?2:1;var _this=this;return function onLayoutComplete(){completeCount++;if(completeCount!==asyncCount){return true}if(item){classie.remove(item.element,'is-positioning-post-drag');item.isPlacing=false;item.copyPlaceRectPosition()}_this.unstamp(elem);_this.sortItemsByPosition();if(itemNeedsPositioning){_this.emitEvent('dragItemPositioned',[_this,item])}return true}};Packery.prototype.bindDraggabillyEvents=function(draggie){draggie.on('dragStart',this.handleDraggabilly.dragStart);draggie.on('dragMove',this.handleDraggabilly.dragMove);draggie.on('dragEnd',this.handleDraggabilly.dragEnd)};Packery.prototype.bindUIDraggableEvents=function($elems){$elems.on('dragstart',this.handleUIDraggable.start).on('drag',this.handleUIDraggable.drag).on('dragstop',this.handleUIDraggable.stop)};Packery.Rect=Rect;Packery.Packer=Packer;return Packery}if(typeof define==='function'&&define.amd){define(['classie/classie','get-size/get-size','outlayer/outlayer','./rect','./packer','./item'],packeryDefinition)}else{window.Packery=packeryDefinition(window.classie,window.getSize,window.Outlayer,window.Packery.Rect,window.Packery.Packer,window.Packery.Item)}})(window);(function(window){'use strict';function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}function packeryDefinition(LayoutMode,Packery,getSize){var PackeryMode=LayoutMode.create('packery');var _getElementOffset=PackeryMode.prototype._getElementOffset;var _getMeasurement=PackeryMode.prototype._getMeasurement;extend(PackeryMode.prototype,Packery.prototype);PackeryMode.prototype._getElementOffset=_getElementOffset;PackeryMode.prototype._getMeasurement=_getMeasurement;var _resetLayout=PackeryMode.prototype._resetLayout;PackeryMode.prototype._resetLayout=function(){this.packer=this.packer||new Packery.Packer();_resetLayout.apply(this,arguments)};var _getItemLayoutPosition=PackeryMode.prototype._getItemLayoutPosition;PackeryMode.prototype._getItemLayoutPosition=function(item){item.rect=item.rect||new Packery.Rect();return _getItemLayoutPosition.call(this,item)};var _manageStamp=PackeryMode.prototype._manageStamp;PackeryMode.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft;this.options.isOriginTop=this.isotope.options.isOriginTop;_manageStamp.apply(this,arguments)};PackeryMode.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;var innerSize=this.options.isHorizontal?'innerHeight':'innerWidth';return hasSizes&&size[innerSize]!==this.size[innerSize]};return PackeryMode}if(typeof define==='function'&&define.amd){define(['isotope/js/layout-mode','packery/js/packery','get-size/get-size'],packeryDefinition)}else{packeryDefinition(window.Isotope.LayoutMode,window.Packery,window.getSize)}})(window);var hljs=new function(){function k(v){return v.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(v){return v.nodeName.toLowerCase()}function i(w,x){var v=w&&w.exec(x);return v&&v.index==0}function d(v){return Array.prototype.map.call(v.childNodes,function(w){if(w.nodeType==3){return b.useBR?w.nodeValue.replace(/\n/g,""):w.nodeValue}if(t(w)=="br"){return"\n"}return d(w)}).join("")}function r(w){var v=(w.className+" "+(w.parentNode?w.parentNode.className:"")).split(/\s+/);v=v.map(function(x){return x.replace(/^language-/,"")});return v.filter(function(x){return j(x)||x=="no-highlight"})[0]}function o(x,y){var v={};for(var w in x){v[w]=x[w]}if(y){for(var w in y){v[w]=y[w]}}return v}function u(x){var v=[];(function w(y,z){for(var A=y.firstChild;A;A=A.nextSibling){if(A.nodeType==3){z+=A.nodeValue.length}else{if(t(A)=="br"){z+=1}else{if(A.nodeType==1){v.push({event:"start",offset:z,node:A});z=w(A,z);v.push({event:"stop",offset:z,node:A})}}}}return z})(x,0);return v}function q(w,y,C){var x=0;var F="";var z=[];function B(){if(!w.length||!y.length){return w.length?w:y}if(w[0].offset!=y[0].offset){return(w[0].offset<y[0].offset)?w:y}return y[0].event=="start"?w:y}function A(H){function G(I){return" "+I.nodeName+'="'+k(I.value)+'"'}F+="<"+t(H)+Array.prototype.map.call(H.attributes,G).join("")+">"}function E(G){F+="</"+t(G)+">"}function v(G){(G.event=="start"?A:E)(G.node)}while(w.length||y.length){var D=B();F+=k(C.substr(x,D[0].offset-x));x=D[0].offset;if(D==w){z.reverse().forEach(E);do{v(D.splice(0,1)[0]);D=B()}while(D==w&&D.length&&D[0].offset==x);z.reverse().forEach(A)}else{if(D[0].event=="start"){z.push(D[0].node)}else{z.pop()}v(D.splice(0,1)[0])}}return F+k(C.substr(x))}function m(y){function v(z){return(z&&z.source)||z}function w(A,z){return RegExp(v(A),"m"+(y.cI?"i":"")+(z?"g":""))}function x(D,C){if(D.compiled){return}D.compiled=true;D.k=D.k||D.bK;if(D.k){var z={};function E(G,F){if(y.cI){F=F.toLowerCase()}F.split(" ").forEach(function(H){var I=H.split("|");z[I[0]]=[G,I[1]?Number(I[1]):1]})}if(typeof D.k=="string"){E("keyword",D.k)}else{Object.keys(D.k).forEach(function(F){E(F,D.k[F])})}D.k=z}D.lR=w(D.l||/\b[A-Za-z0-9_]+\b/,true);if(C){if(D.bK){D.b=D.bK.split(" ").join("|")}if(!D.b){D.b=/\B|\b/}D.bR=w(D.b);if(!D.e&&!D.eW){D.e=/\B|\b/}if(D.e){D.eR=w(D.e)}D.tE=v(D.e)||"";if(D.eW&&C.tE){D.tE+=(D.e?"|":"")+C.tE}}if(D.i){D.iR=w(D.i)}if(D.r===undefined){D.r=1}if(!D.c){D.c=[]}var B=[];D.c.forEach(function(F){if(F.v){F.v.forEach(function(G){B.push(o(F,G))})}else{B.push(F=="self"?D:F)}});D.c=B;D.c.forEach(function(F){x(F,D)});if(D.starts){x(D.starts,C)}var A=D.c.map(function(F){return F.bK?"\\.?\\b("+F.b+")\\b\\.?":F.b}).concat([D.tE]).concat([D.i]).map(v).filter(Boolean);D.t=A.length?w(A.join("|"),true):{exec:function(F){return null}};D.continuation={}}x(y)}function c(S,L,J,R){function v(U,V){for(var T=0;T<V.c.length;T++){if(i(V.c[T].bR,U)){return V.c[T]}}}function z(U,T){if(i(U.eR,T)){return U}if(U.eW){return z(U.parent,T)}}function A(T,U){return!J&&i(U.iR,T)}function E(V,T){var U=M.cI?T[0].toLowerCase():T[0];return V.k.hasOwnProperty(U)&&V.k[U]}function w(Z,X,W,V){var T=V?"":b.classPrefix,U='<span class="'+T,Y=W?"":"</span>";U+=Z+'">';return U+X+Y}function N(){var U=k(C);if(!I.k){return U}var T="";var X=0;I.lR.lastIndex=0;var V=I.lR.exec(U);while(V){T+=U.substr(X,V.index-X);var W=E(I,V);if(W){H+=W[1];T+=w(W[0],V[0])}else{T+=V[0]}X=I.lR.lastIndex;V=I.lR.exec(U)}return T+U.substr(X)}function F(){if(I.sL&&!f[I.sL]){return k(C)}var T=I.sL?c(I.sL,C,true,I.continuation.top):g(C);if(I.r>0){H+=T.r}if(I.subLanguageMode=="continuous"){I.continuation.top=T.top}return w(T.language,T.value,false,true)}function Q(){return I.sL!==undefined?F():N()}function P(V,U){var T=V.cN?w(V.cN,"",true):"";if(V.rB){D+=T;C=""}else{if(V.eB){D+=k(U)+T;C=""}else{D+=T;C=U}}I=Object.create(V,{parent:{value:I}})}function G(T,X){C+=T;if(X===undefined){D+=Q();return 0}var V=v(X,I);if(V){D+=Q();P(V,X);return V.rB?0:X.length}var W=z(I,X);if(W){var U=I;if(!(U.rE||U.eE)){C+=X}D+=Q();do{if(I.cN){D+="</span>"}H+=I.r;I=I.parent}while(I!=W.parent);if(U.eE){D+=k(X)}C="";if(W.starts){P(W.starts,"")}return U.rE?0:X.length}if(A(X,I)){throw new Error('Illegal lexeme "'+X+'" for mode "'+(I.cN||"<unnamed>")+'"')}C+=X;return X.length||1}var M=j(S);if(!M){throw new Error('Unknown language: "'+S+'"')}m(M);var I=R||M;var D="";for(var K=I;K!=M;K=K.parent){if(K.cN){D=w(K.cN,D,true)}}var C="";var H=0;try{var B,y,x=0;while(true){I.t.lastIndex=x;B=I.t.exec(L);if(!B){break}y=G(L.substr(x,B.index-x),B[0]);x=B.index+y}G(L.substr(x));for(var K=I;K.parent;K=K.parent){if(K.cN){D+="</span>"}}return{r:H,value:D,language:S,top:I}}catch(O){if(O.message.indexOf("Illegal")!=-1){return{r:0,value:k(L)}}else{throw O}}}function g(y,x){x=x||b.languages||Object.keys(f);var v={r:0,value:k(y)};var w=v;x.forEach(function(z){if(!j(z)){return}var A=c(z,y,false);A.language=z;if(A.r>w.r){w=A}if(A.r>v.r){w=v;v=A}});if(w.language){v.second_best=w}return v}function h(v){if(b.tabReplace){v=v.replace(/^((<[^>]+>|\t)+)/gm,function(w,z,y,x){return z.replace(/\t/g,b.tabReplace)})}if(b.useBR){v=v.replace(/\n/g,"<br>")}return v}function p(z){var y=d(z);var A=r(z);if(A=="no-highlight"){return}var v=A?c(A,y,true):g(y);var w=u(z);if(w.length){var x=document.createElementNS("http://www.w3.org/1999/xhtml","pre");x.innerHTML=v.value;v.value=q(w,u(x),y)}v.value=h(v.value);z.innerHTML=v.value;z.className+=" hljs "+(!A&&v.language||"");z.result={language:v.language,re:v.r};if(v.second_best){z.second_best={language:v.second_best.language,re:v.second_best.r}}}var b={classPrefix:"hljs-",tabReplace:null,useBR:false,languages:undefined};function s(v){b=o(b,v)}function l(){if(l.called){return}l.called=true;var v=document.querySelectorAll("pre code");Array.prototype.forEach.call(v,p)}function a(){addEventListener("DOMContentLoaded",l,false);addEventListener("load",l,false)}var f={};var n={};function e(v,x){var w=f[v]=x(this);if(w.aliases){w.aliases.forEach(function(y){n[y]=v})}}function j(v){return f[v]||f[n[v]]}this.highlight=c;this.highlightAuto=g;this.fixMarkup=h;this.highlightBlock=p;this.configure=s;this.initHighlighting=l;this.initHighlightingOnLoad=a;this.registerLanguage=e;this.getLanguage=j;this.inherit=o;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.BE={b:"\\\\[\\s\\S]",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.REGEXP_MODE={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]};this.TM={cN:"title",b:this.IR,r:0};this.UTM={cN:"title",b:this.UIR,r:0}}();hljs.registerLanguage("javascript",function(a){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require"},c:[{cN:"pi",b:/^\s*('|")use strict('|")/,r:10},a.ASM,a.QSM,a.CLCM,a.CBLCLM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBLCLM,a.REGEXP_MODE,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,c:[a.inherit(a.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[a.CLCM,a.CBLCLM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+a.IR,r:0}]}});(function(window,$){'use strict';var ID=window.ID={};ID.pages={};var notifElem;var getSize=window.getSize;var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};docReady(function(){notifElem=document.querySelector('#notification');$('.js-radio-button-group').radioButtonGroup();var pageAttr=document.body.getAttribute('data-page');if(pageAttr&&typeof ID[pageAttr]==='function'){ID[pageAttr]()}var head=document.querySelector('head');var condClass=getStyle(head).fontFamily.replace(/['"]/g,'');if(condClass==='desktop-ish'||condClass==='tablet-ish'){stickifyPageNav()}});ID.getSomeItemElements=function(){var fragment=document.createDocumentFragment();var items=[];for(var i=0;i<3;i++){var item=document.createElement('div');var wRand=Math.random();var widthClass=wRand>0.85?'w4':wRand>0.7?'w2':'';var hRand=Math.random();var heightClass=hRand>0.85?'h4':hRand>0.7?'h2':'';item.className='item '+widthClass+' '+heightClass;fragment.appendChild(item);items.push(item)}};var docElem=document.documentElement;var textSetter=docElem.textContent!==undefined?'textContent':'innerText';function setText(elem,value){elem[textSetter]=value}var transitionProp=getStyleProperty('transition');var notifyTimeout;var hideTime=transitionProp?1000:1500;ID.notify=function(message,isGonnaHide){setText(notifElem,message);if(transitionProp){notifElem.style[transitionProp]='none'}notifElem.style.display='block';notifElem.style.opacity='1';if(isGonnaHide){if(notifyTimeout){clearTimeout(notifyTimeout)}notifyTimeout=setTimeout(ID.hideNotify,hideTime)}};ID.hideNotify=function(){if(transitionProp){notifElem.style[transitionProp]='opacity 1.0s';notifElem.style.opacity='0'}else{notifElem.style.display='none'}};$.fn.radioButtonGroup=function(){this.each(function(i,buttonGroup){var $buttonGroup=$(buttonGroup);$buttonGroup.find(':checked').parent().addClass('is-checked');$buttonGroup.on('click','input, button',function(){$buttonGroup.find('.is-checked').removeClass('is-checked');var $this=$(this);var $clickedButton=$this.hasClass('button')?$this:$this.parents('.button');$clickedButton.addClass('is-checked')})});return this};hljs.configure({classPrefix:''});$.fn.displayIsotopeCode=function(key,value){value=typeof value==='string'&&value.indexOf('function')===-1?"'"+value+"'":value;var codeHTML="$container.isotope({ "+key+": "+value+" })";codeHTML=hljs.highlight('js',codeHTML).value;this.html(codeHTML)};function stickifyPageNav(){var pageNav=document.querySelector('#page-nav');if(!pageNav){return}var navHeight=getSize(pageNav).outerHeight;if(navHeight>=window.innerHeight){return}new Stickeroo(pageNav)}function Stickeroo(element){this.element=element;this.originalY=this.element.getBoundingClientRect().top+window.pageYOffset;eventie.bind(window,'scroll',this);this.isFixed=false;this.onscroll()}Stickeroo.prototype.handleEvent=function(event){var methodName='on'+event.type;if(this[methodName]){this[methodName](event)}};function throttleProto(_class,methodName,threshold){var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){if(this[timeoutName]){return}method.apply(this,arguments);var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,arguments);delete _this[timeoutName]},threshold||100)}}Stickeroo.prototype.onscroll=function(){var isFixed=window.pageYOffset>=this.originalY;if(isFixed===this.isFixed){return}classie.toggle(this.element,'is-fixed');this.isFixed=isFixed};throttleProto(Stickeroo,'onscroll',50)})(window,jQuery);(function(window){'use strict';var ID=window.ID;var transitionProp=getStyleProperty('transition');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProp];ID.appendix=function(){(function(){var $container=$('#animate-item-size .isotope').isotope({masonry:{columnWidth:60}});$container.on('click','.item',function(){$(this).toggleClass('is-expanded');$container.isotope('layout')})})();(function(){var $container=$('#animate-item-size-responsive .isotope').isotope({itemSelector:'.item',masonry:{columnWidth:'.grid-sizer'}});$container.on('click','.item-content',function(){var target=this;var previousContentSize=getSize(target);target.style[transitionProp]='none';target.style.width=previousContentSize.width+'px';target.style.height=previousContentSize.height+'px';var itemElem=target.parentNode;classie.toggleClass(itemElem,'is-expanded');var redraw=target.offsetWidth;target.style[transitionProp]='';if(transitionProp){var onTransitionEnd=function(){target.style.width='';target.style.height='';target.removeEventListener(transitionEndEvent,onTransitionEnd,false)};target.addEventListener(transitionEndEvent,onTransitionEnd,false)}var size=getSize(itemElem);target.style.width=size.width+'px';target.style.height=size.height+'px';redraw=null;$container.isotope('layout')})})()}})(window);(function(window,$){'use strict';var ID=window.ID;function timeStamp(){var now=new Date();var min=now.getMinutes();min=min<10?'0'+min:min;var seconds=now.getSeconds();seconds=seconds<10?'0'+seconds:seconds;return[now.getHours(),min,seconds].join(':')}function notify(message){ID.notify(message+' at '+timeStamp(),true)}ID.events=function(){(function(){var $container=$('#layout-complete-demo .isotope').isotope({masonry:{columnWidth:50}});$container.isotope('on','layoutComplete',function(isoInstance,laidOutItems){notify('Isotope layout completed on '+laidOutItems.length+' items')});$container.on('click','.mini-item',function(){$(this).toggleClass('gigante');$container.isotope('layout')})})();(function(){var $container=$('#remove-complete-demo .isotope').isotope({masonry:{columnWidth:50}});$container.isotope('on','removeComplete',function(isoInstance,removedItems){notify('Removed '+removedItems.length+' items')});$container.on('click','.mini-item',function(){$container.isotope('remove',this).isotope('layout')})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;ID.filtering=function(){(function(){var $container=$('#filtering-demo .isotope').isotope({itemSelector:'.element-item',layoutMode:'fitRows',transitionDuration:'0.6s'});var filterFns={numberGreaterThan50:function(){var number=$(this).find('.number').text();return parseInt(number,10)>50},ium:function(){var name=$(this).find('.name').text();return name.match(/ium$/)}};var filterFnsDisplay={numberGreaterThan50:"function() {\n  var number = $(this).find('.number').text();\n  return parseInt( number, 10 ) > 50;\n}",ium:'function() {\n  var name = $(this).find(\'.name\').text();\n  return name.match( /ium$/ );\n}'};var $codeDisplay=$('#filtering-demo .code-display code');$('#filtering-demo .button-group').on('click','button',function(){var filterValue=$(this).attr('data-filter');var isoFilterValue=filterFns[filterValue]||filterValue;var displayFilterValue=filterFnsDisplay[filterValue]||filterValue;$container.isotope({filter:isoFilterValue});$codeDisplay.displayIsotopeCode('filter',displayFilterValue)})})();(function(){var $demo=$('#combination-filters-demo');var $container=$demo.find('.isotope').isotope({itemSelector:'.color-shape',columnWidth:80,transitionDuration:'0.6s'});var $codeDisplay=$demo.find('pre code');var filters={};$demo.on('click','.button',function(){var $this=$(this);var $buttonGroup=$this.parents('.button-group');var filterGroup=$buttonGroup.attr('data-filter-group');filters[filterGroup]=$this.attr('data-filter');var filterValue='';for(var prop in filters){filterValue+=filters[prop]}$container.isotope({filter:filterValue});$codeDisplay.displayIsotopeCode('filter',filterValue)})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;ID.index=function(){(function(){var $container=$('#hero .isotope').isotope({itemSelector:'.element-item',layoutMode:'fitRows',transitionDuration:'0.6s',getSortData:{name:'.name',symbol:'.symbol',number:'.number parseInt',category:'[data-category]',weight:function(itemElem){var weight=$(itemElem).find('.weight').text();return parseFloat(weight.replace(/[\(\)]/g,''))}}});var filterFns={numberGreaterThan50:function(){var number=$(this).find('.number').text();return parseInt(number,10)>50},ium:function(){var name=$(this).find('.name').text();return name.match(/ium$/)}};var filterFnsDisplay={numberGreaterThan50:"function() {\n  var number = $(this).find('.number').text();\n  return parseInt( number, 10 ) > 50;\n}",ium:'function() {\n  var name = $(this).find(\'.name\').text();\n  return name.match( /ium$/ );\n}'};var $codeDisplay=$('#hero .code-display code');$('#hero .sort-by').on('click','button',function(){var sortByValue=$(this).attr('data-sort-by');$container.isotope({sortBy:sortByValue});$codeDisplay.displayIsotopeCode('sortBy',sortByValue)});$('#hero .filters').on('click','button',function(){var filterValue=$(this).attr('data-filter');var isoFilterValue=filterFns[filterValue]||filterValue;var displayFilterValue=filterFnsDisplay[filterValue]||filterValue;$container.isotope({filter:isoFilterValue});$codeDisplay.displayIsotopeCode('filter',displayFilterValue)})})();(function(){var $container=$('#in-use-container');$container.find('.in-use-item').hide();$container.isotope({itemSelector:'none',masonry:{columnWidth:'.grid-sizer',gutter:'.gutter-sizer'}});$container.isotope('option',{itemSelector:'.in-use-item'});$container.imagesLoaded().progress(function(imgLoad,image){var $item=$(image.img).parents('.in-use-item');$item.show();$container.isotope('appended',$item)})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;var $window=$(window);ID['layout-modes']=function(){(function(){var $container=$('#layout-modes-demo .isotope').isotope({itemSelector:'.element-item',layoutMode:'masonry',transitionDuration:'0.6s',masonry:{columnWidth:110},cellsByRow:{columnWidth:220,rowHeight:220},masonryHorizontal:{rowHeight:110},cellsByColumn:{columnWidth:220,rowHeight:220}});var isHorizontal=false;var $codeDisplay=$('#layout-modes-demo .code-display code');$('#layout-modes-demo .button-group').on('click','button',function(){var $this=$(this);var isHorizontalMode=!!$this.attr('data-is-horizontal');if(isHorizontal!==isHorizontalMode){var containerStyle=isHorizontalMode?{height:$window.height()*0.7}:{width:'auto'};$container.css(containerStyle);isHorizontal=isHorizontalMode}var layoutModeValue=$this.attr('data-layout-mode-value');$container.isotope({layoutMode:layoutModeValue});$codeDisplay.displayIsotopeCode('layoutMode',layoutModeValue)})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;function getItemElement(){var elem=document.createElement('div');var wRand=Math.random();var hRand=Math.random();var widthClass=wRand>0.8?'w3':wRand>0.6?'w2':'';var heightClass=hRand>0.8?'h3':hRand>0.5?'h2':'';elem.className='mini-item '+widthClass+' '+heightClass;return elem}ID.methods=function(){(function(){var $demo=$('#appended-demo');var $container=$demo.find('.isotope').isotope({masonry:{columnWidth:50}});$demo.find('button').on('click',function(){var elems=[];for(var i=0;i<3;i++){var elem=getItemElement();elems.push(elem)}$container.append(elems).isotope('appended',elems)})})();(function(){var $demo=$('#destroy-demo');var isoOptions={masonry:{columnWidth:50}};var $container=$demo.find('.isotope').isotope(isoOptions);var isActive=true;$demo.find('button').on('click',function(){if(isActive){$container.isotope('destroy')}else{$container.isotope(isoOptions)}isActive=!isActive})})();(function(){var $demo=$('#insert-demo');var $container=$demo.find('.isotope').isotope({masonry:{columnWidth:50},filter:function(){var number=$(this).find('.number').text();return parseInt(number,10)%2},sortBy:'number',getSortData:{'number':'.number parseInt'}});$demo.find('button').on('click',function(){var elems=[];for(var i=0;i<3;i++){var elem=getItemElement();var number=Math.floor(Math.random()*100);$(elem).append('<p class="number">'+number+'</p>');elems.push(elem)}$container.isotope('insert',elems)})})();(function(){var $container=$('#layout-demo .isotope').isotope({masonry:{columnWidth:50}});$container.on('click','.mini-item',function(){$(this).toggleClass('gigante');$container.isotope('layout')})})();(function(){var $demo=$('#prepended-demo');var $container=$demo.find('.isotope').isotope({masonry:{columnWidth:50}});$demo.find('button').on('click',function(){var elems=[];for(var i=0;i<3;i++){var elem=getItemElement();elems.push(elem)}$container.prepend(elems).isotope('prepended',elems)})})();(function(){var $demo=$('#stamp-demo');var $container=$demo.find('.isotope').isotope({itemSelector:'.mini-item',masonry:{columnWidth:50}});var $stampElem=$demo.find('.stamp');var isStamped=false;$demo.find('button').on('click',function(){if(isStamped){$container.isotope('unstamp',$stampElem)}else{$container.isotope('stamp',$stampElem)}$container.isotope('layout');isStamped=!isStamped})})();(function(){var $container=$('#remove-demo .isotope').isotope({masonry:{columnWidth:50}});$container.on('click','.mini-item',function(){$container.isotope('remove',this).isotope('layout')})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;ID.sorting=function(){(function(){var $buttonGroup=$('#sorting-demo .button-group');var $container=$('#sorting-demo .isotope').isotope({itemSelector:'.element-item',layoutMode:'fitRows',transitionDuration:'0.6s',getSortData:{name:'.name',symbol:'.symbol',number:'.number parseInt',category:'[data-category]',weight:function(itemElem){var weight=$(itemElem).find('.weight').text();return parseFloat(weight.replace(/[\(\)]/g,''))}}});var $codeDisplay=$('#sorting-demo .code-display code');$buttonGroup.on('click','button',function(){var sortByValue=$(this).attr('data-sort-by');$container.isotope({sortBy:sortByValue});$codeDisplay.displayIsotopeCode('sortBy',sortByValue)})})();(function(){function getMultiSortBy(val){return val.split(',')}var $buttonGroup=$('#multiple-sort-by-demo .button-group');var $container=$('#multiple-sort-by-demo .isotope').isotope({layoutMode:'fitRows',itemSelector:'.mini-item',getSortData:{color:'[data-color]',number:'.number parseInt'},sortBy:['color','number']});$buttonGroup.on('click','button',function(){$container.isotope({sortBy:getMultiSortBy(this.getAttribute('data-sort-by'))})})})()}})(window,jQuery);(function(window,$){'use strict';var ID=window.ID;ID.vertical=function(){(function(){var $container=$('#vertical-feature-demo .isotope').isotope({itemSelector:'li',layoutMode:'vertical',transitionDuration:'0.6s',getSortData:{name:'.name',symbol:'.symbol',number:'.number parseInt',category:'.category',weight:function(itemElem){var weight=$(itemElem).find('.weight').text();return parseFloat(weight.replace(/[\(\)]/g,''))}}});$('#vertical-feature-demo .button-group').on('click','button',function(){var sortByValue=$(this).attr('data-sort-by');$container.isotope({sortBy:sortByValue})})})()}})(window,jQuery);